<!DOCTYPE HTML>
<html>
<head>
<script>

let raceEth = ["Asian/PI", "Black", "Latinx", "Middle Eastern", "Native American", "White"] ;

let stops = 
  [
    //["BeavertonPD", 724, 1156, 2466, 341, 54, 8265, 13006],
    //["ClackamasCOSO", 721, 958, 2354, 252, 178, 13552, 18015],
    //["EugenePD", 278, 758, 919, 0, 0, 9609, 11564],
    //["GreshamPD", 94, 312, 450, 30, 7, 1358, 2251],
    //["HillsboroPD", 365, 366, 1748, 160, 25, 3698, 6362],
    ["Marion", 421, 401, 2616, 146, 12, 10142, 13738],
    //["MedfordPD", 55, 154, 696, 17, 5, 3284, 4211],
    ["Multnomah", 236, 762, 1016, 94, 27, 4464, 6599],
    ["Oregon", 3316, 4129, 18006, 1669, 746, 100782, 128648],
    ["Portland", 674, 2324, 1564, 186, 74, 8611, 13433],
    ["Salem", 123, 191, 1272, 29, 22, 3123, 4760]
    //["WashingtonCOSO", 1304, 1163, 5000, 618, 136, 12578, 20799]
  ] ;

function iToDataPoint(labs,pts,i)
{
  let dataPoint = [] ;
  for (let j = 0 ; j < pts.length ; j++)
  {
    dataPoint.push( { label: pts[j][0], y: pts[j][i+1] } ) ;
  }
  return {
      type: "stackedColumn100",
      name: labs[i],
      showInLegend: true,
      yValueFormatString: "#,##0\"%\"",
      dataPoints: dataPoint
    } ;
}

function makeData(labs,pts)
{
  let data = [] ;
  for (let i = 0 ; i < labs.length ; i++)
  {
    data.push(iToDataPoint(labs,pts,i)) ;
  }
  return data ;
}
  
function render() {
  $("#chartStop").CanvasJSChart({title:{text: "Police Stop Data" }, data: makeData(raceEth,stops)});
}
</script>
</head>
<body onload="render()" >
<div id="chartStop" style="height: 370px; width: 100%;"></div>
<script type="text/javascript" src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="https://canvasjs.com/assets/script/jquery.canvasjs.min.js"></script>
</body>
</html>
